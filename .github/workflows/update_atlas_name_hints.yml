name: Update atlas name hints

on:
  workflow_dispatch:
  push:

permissions:
  contents: write
  pull-requests: write

jobs:
  update-atlas-names:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Generate atlas name hints
        run: >-
          bash scripts/generate_atlas_name.sh
          --source-url https://gin.g-node.org/BrainGlobe/atlases/raw/master/last_versions.conf

      - name: Create pull request
        uses: peter-evans/create-pull-request@v6
        with:
          commit-message: "Update atlas name hints"
          title: "Update atlas name hints"
          body: "Auto-generated from last_versions.conf."
          branch: "automation/update-atlas-name-hints"
          delete-branch: true
